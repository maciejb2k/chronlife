<div class="page-settings">
  <header class="dash-header">
    <div class="dash-header__left">
      <h1 class="dash-header__title">Zabezpieczenia</h1>
      <%= render "shared/breadcrumbs" %>
    </div>
    <div class="dash-header__right">
      <%= link_to authenticated_root_path, class: "dash-button dash-button--back" do %>
        <i class="ri-arrow-left-line dash-button__icon"></i>
        Powrót
      <% end %>
    </div>
  </header>
  <div class="dash-flash-messages">
    <% if flash[:notice].present? %>
      <%= render DashAlertComponent.new(type: :success) do %>
        <%= flash[:notice] %>
      <% end %>
    <% end %>
  </div>
  <div class="page-settings__content">
    <div class="page-settings__nav">
      <%= render "shared/settings_nav" %>
    </div>
    <div class="page-settings__frame">
      <div class="settings-group">
        <header class="settings-group__header">
          <h3 class="settings-group__header__title">Zmień Hasło</h3>
        </header>
        <div class="settings-group__content">
          <% if @user.oauth_account? %>
            <p class="settings-group__text">Ta opcja jest dla ciebie wyłączona, ponieważ zarejestrowałeś się poprzez zewnętrznego dostawcę.</p>
          <% else %>
            <%= form_with(model: @user, url: settings_privacy_path, html: { class: "settings-form" } ) do |f| %>
              <div class="settings-form__group">
                <%= f.label :current_password, "Obecne hasło", class: "settings-form__label" %>
                <%= f.password_field :current_password, class: "settings-form__input"  %>
                <%= render DashFormErrorComponent.new(model: @user, field: :current_password) %>
              </div>
              <div class="settings-form__group">
                <%= f.label :password, "Hasło", class: "settings-form__label" %>
                <%= f.password_field :password, class: "settings-form__input"  %>
                <%= render DashFormErrorComponent.new(model: @user, field: :password) %>
              </div>
              <div class="settings-form__group">
                <%= f.label :password_confirmation, "Powtórz hasło", class: "settings-form__label" %>
                <%= f.password_field :password_confirmation, class: "settings-form__input" %>
                <%= render DashFormErrorComponent.new(model: @user, field: :password_confirmation) %>
              </div>
              <div class="settings-form__group">
                <%= f.submit "Zapisz", class: "dash-button dash-button--new settings-form__submit" %>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
      <div class="settings-group">
        <header class="settings-group__header">
          <h3 class="settings-group__header__title">Dwuskładnikowe uwierzytelnianie</h3>
        </header>
        <div class="settings-group__content">
          <%= button_to 'Włącz', settings_two_factor_authentication_path, method: :post, class: "dash-button dash-button--new" %>
        </div>
      </div>
    </div>
  </div>
</div>
